<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShivamLab's | AI Recruitment</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="style.css">

    <style>
        /* --- Banner Slider Styles: Controls the hero section on the dashboard --- */
        .banner-slider {
            width: 100%;
            height: 250px;
            border-radius: var(--radius-lg);
            overflow: hidden;
            position: relative;
            margin-bottom: 24px;
            border: 1px solid var(--border-subtle);
        }

        .slide {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: flex-end;
        }

        .slide.active {
            opacity: 1;
        }

        .slide-content {
            background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent);
            width: 100%;
            padding: 24px;
            color: white;
        }

        .slide-content h2 {
            font-size: 20px;
            margin-bottom: 4px;
            color: white;
        }

        .slide-content p {
            font-size: 13px;
            color: #d4d4d8;
        }

        .slider-dots {
            position: absolute;
            bottom: 16px;
            right: 24px;
            display: flex;
            gap: 8px;
            z-index: 10;
        }

        .dot {
            width: 8px;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            cursor: pointer;
        }

        .dot.active {
            background: var(--primary-500);
        }

        /* --- Custom Logo Styling: Orange-themed brand identity --- */
        .custom-logo-bg {
            background: rgba(249, 115, 22, 0.1) !important;
            border-color: rgba(249, 115, 22, 0.2) !important;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 15px rgba(249, 115, 22, 0.15);
        }

        .brand-logo svg {
            width: 20px;
            height: 20px;
            display: block;
        }

        .brand-text span {
            font-weight: 700;
            margin-left: 1px;
        }
    </style>
</head>

<body>


    <div class="app-container">
        <aside class="sidebar">
            <div class="brand">
                <div class="brand-logo custom-logo-bg">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
                            stroke="url(#logo-gradient)" stroke-width="2" stroke-opacity="0.2" />

                        <path
                            d="M12 6V8M12 16V18M6 12H8M16 12H18M12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11Z"
                            stroke="url(#logo-gradient)" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />

                        <path d="M15 9L9 15" stroke="url(#logo-gradient)" stroke-width="2" stroke-linecap="round" />

                        <defs>
                            <linearGradient id="logo-gradient" x1="2" y1="2" x2="22" y2="22"
                                gradientUnits="userSpaceOnUse">
                                <stop stop-color="#fb923c" />
                                <stop offset="1" stop-color="#ea580c" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <div class="brand-text">
                    Shivam<span style="color: var(--primary-500);">Lab's</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="section-label">Main Menu</div>
                <ul class="nav-menu">
                    <li>
                        <a href="#" class="nav-link active" onclick="switchView('dashboard', this)">
                            <i class="fa-solid fa-layer-group"></i>
                            <span>Overview</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" onclick="switchView('candidates', this)">
                            <i class="fa-solid fa-user-group"></i>
                            <span>Candidates</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="nav-section">
                <div class="section-label">AI Tools</div>
                <ul class="nav-menu">
                    <li>
                        <a href="#" class="nav-link" onclick="switchView('campaigns', this)">
                            <i class="fa-solid fa-wand-magic-sparkles"></i>
                            <span>Voice Assistant</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" onclick="switchView('video-assistant', this)">
                            <i class="fa-solid fa-video"></i>
                            <span>Video Assistant</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="sidebar-footer">
                <div class="user-profile" onclick="switchView('settings')" style="cursor: pointer;">
                    <div class="avatar">AD</div>
                    <div class="user-info" style="flex: 1;">
                        <h4>Loading...</h4>
                    </div>
                    <i class="fa-solid fa-chevron-right" style="font-size: 12px; color: var(--text-tertiary);"></i>
                </div>
            </div>
        </aside>

        <main class="main-wrapper">
            <header class="top-header">
                <div class="page-header">
                    <h2 id="page-title" class="page-title">Dashboard</h2>
                </div>
                <div class="header-actions">
                    <div class="search-bar">
                        <i class="fa-solid fa-magnifying-glass"></i>
                        <input type="text" placeholder="Search...">
                    </div>
                </div>
            </header>

            <div class="content-area hide-scrollbar" id="content-area">

                <div id="dashboard" class="view-section active">

                    <div class="banner-slider">
                        <div class="slide active">
                            <img src="image/chetanalabs.png" alt="ChetanaLabs Banner" class="slide-img">
                            <div class="slide-content">
                                <h2>Welcome to ChetanaLab's v2.0</h2>
                                <p>Our new AI Agent "Sarah" is now 30% faster at screening technical candidates.</p>
                            </div>
                        </div>
                    </div>

                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <span class="kpi-label">Total Candidates</span>
                                <div class="kpi-icon"><i class="fa-solid fa-users"></i></div>
                            </div>
                            <div class="kpi-value" id="dash-total-candidates">0</div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-header">
                                <span class="kpi-label">Active Processing</span>
                                <div class="kpi-icon"><i class="fa-solid fa-phone-volume"></i></div>
                            </div>
                            <div class="kpi-value" id="dash-active-count">0</div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-header">
                                <span class="kpi-label">Interviews Done</span>
                                <div class="kpi-icon"><i class="fa-solid fa-clipboard-check"></i></div>
                            </div>
                            <div class="kpi-value" id="dash-interviews-done">0</div>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <h3>Live Activity</h3>
                            <button class="btn btn-secondary btn-sm">View Archive</button>
                        </div>
                        <div class="table-wrapper">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Candidate</th>
                                        <th>Role</th>
                                        <th>Status</th>
                                        <th>Duration</th>
                                        <th>Time</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <div class="flex-center" style="justify-content: flex-start; gap: 12px;">
                                                <div class="avatar" style="width: 28px; height: 28px; font-size: 10px;">
                                                    SJ</div>
                                                <span style="font-weight: 500;">Sarah Jenkins</span>
                                            </div>
                                        </td>
                                        <td>Senior Frontend Dev</td>
                                        <td><span class="badge badge-success">Analyzed</span></td>
                                        <td class="font-mono text-muted">14m 32s</td>
                                        <td class="text-muted">2 mins ago</td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="flex-center" style="justify-content: flex-start; gap: 12px;">
                                                <div class="avatar"
                                                    style="width: 28px; height: 28px; font-size: 10px; background: var(--warning-bg); color: var(--warning-text);">
                                                    MC</div>
                                                <span style="font-weight: 500;">Michael Chen</span>
                                            </div>
                                        </td>
                                        <td>Backend Engineer</td>
                                        <td><span class="badge badge-primary">Active Session</span></td>
                                        <td class="font-mono text-muted">--</td>
                                        <td class="text-muted">Live Now</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="candidates" class="view-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h3>All Candidates</h3>
                            <div style="display: flex; gap: 10px;">
                                <button class="btn btn-secondary btn-sm"><i class="fa-solid fa-filter"></i>
                                    Filter</button>
                                <button class="btn btn-primary btn-sm"
                                    onclick="showToast('Add Candidate modal would open here', 'info')"><i
                                        class="fa-solid fa-plus"></i> Import CSV</button>
                            </div>
                        </div>
                        <div class="table-wrapper">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Contact</th>
                                        <th>Campaign</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="all-candidates-tbody">
                                    <tr>
                                        <td colspan="5"
                                            style="text-align:center; padding:30px; color:var(--text-tertiary);">
                                            <i class="fa-solid fa-circle-notch fa-spin"></i> Loading candidates...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="reports" class="view-section">

                    <div class="campaign-header-controls"
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; background: white; padding: 20px; border-radius: var(--radius-lg); border: 1px solid var(--border-subtle);">
                        <div style="display: flex; align-items: center; gap: 16px;">
                            <label style="font-weight: 600; color: var(--text-secondary);">Select Campaign:</label>
                            <select class="form-control" id="campaign-select" onchange="updateCampaignStats(this.value)"
                                style="width: 250px;">
                                <option value="q4">Q4 Sales Hiring</option>
                                <option value="tech">Tech Team Expansion</option>
                                <option value="intern">Summer Internship</option>
                            </select>
                        </div>
                        <button class="btn btn-secondary" onclick="exportCampaignData()">
                            <i class="fa-solid fa-download"></i> Download Report
                        </button>
                    </div>

                    <div class="kpi-grid">
                        <div class="kpi-card" style="border-left: 4px solid var(--success);">
                            <div class="kpi-header">
                                <span class="kpi-label">Shortlisted</span>
                                <div class="kpi-icon"
                                    style="background: var(--success-bg); color: var(--success-text);"><i
                                        class="fa-solid fa-user-check"></i></div>
                            </div>
                            <div class="kpi-value" id="stat-selected">42</div>
                        </div>
                        <div class="kpi-card" style="border-left: 4px solid var(--danger);">
                            <div class="kpi-header">
                                <span class="kpi-label">Rejected</span>
                                <div class="kpi-icon" style="background: var(--danger-bg); color: var(--danger-text);">
                                    <i class="fa-solid fa-user-xmark"></i>
                                </div>
                            </div>
                            <div class="kpi-value" id="stat-rejected">18</div>
                        </div>
                        <div class="kpi-card" style="border-left: 4px solid var(--warning);">
                            <div class="kpi-header">
                                <span class="kpi-label">Under Review</span>
                                <div class="kpi-icon"
                                    style="background: var(--warning-bg); color: var(--warning-text);"><i
                                        class="fa-solid fa-clipboard-question"></i></div>
                            </div>
                            <div class="kpi-value" id="stat-pending">156</div>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <h3>Analytics Matrix</h3>
                            <span class="badge badge-primary">Real-time</span>
                        </div>
                        <div class="table-wrapper">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Result</th>
                                        <th>AI Score</th>
                                        <th>Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Sarah Jenkins</strong></td>
                                        <td class="text-muted">sarah.j@example.com</td>
                                        <td><span class="badge badge-success">Selected</span></td>
                                        <td><span class="text-success" style="font-weight: 700;">9.2/10</span></td>
                                        <td class="text-muted">Oct 24, 2023</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Michael Chen</strong></td>
                                        <td class="text-muted">m.chen@example.com</td>
                                        <td><span class="badge badge-danger">Rejected</span></td>
                                        <td><span class="text-danger" style="font-weight: 700;">4.5/10</span></td>
                                        <td class="text-muted">Oct 23, 2023</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Jessica Wu</strong></td>
                                        <td class="text-muted">jess.wu@example.com</td>
                                        <td><span class="badge badge-warning">Pending</span></td>
                                        <td>-</td>
                                        <td class="text-muted">Oct 25, 2023</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="campaigns" class="view-section">
                    <div class="vapi-builder-wrapper">

                        <aside class="vapi-sub-sidebar">
                            <div class="vapi-sub-header">
                                <span style="font-weight: 600; font-size: 14px;"><i
                                        class="fa-solid fa-wand-magic-sparkles"></i>
                                    Voice Assistant</span>

                            </div>

                            <button class="btn-vapi-create" onclick="showCreateCampaignModal()">
                                <i class="fa-solid fa-plus"></i> New Campaign
                            </button>

                            <div class="vapi-search">
                                <i class="fa-solid fa-magnifying-glass"></i>
                                <input type="text" placeholder="Filter...">
                            </div>

                            <div class="campaign-list" id="campaigns-list-container">
                                <div class="vapi-list-item active"
                                    style="padding:10px; font-size:12px; color:var(--text-secondary);">
                                    Loading campaigns...
                                </div>
                            </div>
                        </aside>

                        <main id="campaign-blank-state" class="vapi-main-content active"
                            style="display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
                            <i class="fa-solid fa-wand-magic-sparkles"
                                style="font-size: 50px; color: var(--primary-500); margin-bottom: 20px;"></i>
                            <h2 style="font-size: 20px; color: white; margin-bottom: 10px;">Welcome to the AI Campaign
                                Builder</h2>
                            <p style="color: var(--text-secondary); max-width: 400px;">Get started by creating your
                                first AI interview
                                campaign. Configure the persona, steps, and candidate list here.</p>
                            <button class="btn-vapi-create"
                                style="width: auto; margin-top: 20px; color: white; background: var(--primary-500); border:none;"
                                onclick="showCreateCampaignModal()">
                                <i class="fa-solid fa-plus"></i> Create New Campaign
                            </button>
                        </main>

                        <main id="campaign-builder-content" class="vapi-main-content">

                            <header class="vapi-content-header">
                                <div class="vapi-title">
                                    <h1 id="vapi-campaign-title">Q4 Sales Hiring Drive</h1>
                                    <p>Status: <span id="campaign-status-text" style="color: var(--vapi-yellow);">‚óè In
                                            Design</span></p>
                                </div>
                                <div class="vapi-header-actions">
                                    <button id="btn-launch-campaign" class="btn-vapi-launch"
                                        onclick="launchVapiCampaign()" style="display:none;">
                                        <i class="fa-solid fa-rocket"></i> Start Campaign
                                    </button>

                                    <button id="btn-stop-campaign" class="btn-vapi-stop" onclick="stopCampaign()"
                                        style="display:none;">
                                        <i class="fa-solid fa-stop-circle"></i> Stop Campaign
                                    </button>
                                </div>
                            </header>

                            <div class="vapi-tabs">
                                <div class="vapi-tab active" onclick="switchHrTab('tab-candidates', this)">
                                    <i class="fa-solid fa-database"></i> Source Data
                                </div>
                                <div class="vapi-tab" onclick="switchHrTab('tab-structure', this)">
                                    <i class="fa-solid fa-network-wired"></i> Interview Steps
                                </div>

                                <div class="vapi-tab" onclick="switchHrTab('tab-agent', this)">
                                    <i class="fa-solid fa-brain"></i> AI Persona
                                </div>
                                <div class="vapi-tab" onclick="switchHrTab('tab-questions', this)">
                                    <i class="fa-solid fa-file-signature"></i> Script
                                </div>
                                <div class="vapi-tab" onclick="switchHrTab('tab-reports', this)">
                                    <i class="fa-solid fa-sliders"></i> Reports
                                </div>
                                <div class="vapi-tab" onclick="switchHrTab('tab-cost', this)">
                                    <i class="fa-solid fa-coins"></i> Cost
                                </div>
                            </div>

                            <div id="tab-candidates" class="hr-tab-content active">
                                <div class="sd-container">
                                    <div class="sd-section-header">
                                        <div class="sd-header-icon"><i class="fa-solid fa-file-import"></i></div>
                                        <div class="sd-header-text">
                                            <h3>Bulk Import</h3>
                                            <p>Upload your candidate list via CSV or Excel.</p>
                                        </div>
                                    </div>

                                    <div class="sd-upload-card"
                                        onclick="document.getElementById('candidate-file-input').click()">
                                        <input type="file" id="candidate-file-input" hidden accept=".csv, .xlsx, .xls"
                                            onchange="handleFileUpload(this)">

                                        <div class="upload-visual">
                                            <div class="file-icon-stack">
                                                <i class="fa-solid fa-file-csv file-1"></i>
                                                <i class="fa-solid fa-file-excel file-2"></i>
                                            </div>
                                        </div>
                                        <div class="upload-info">
                                            <h4>Click to Upload or Drag & Drop</h4>
                                            <p>Supports .CSV, .XLSX (Max 10MB)</p>
                                            <div class="upload-meta">
                                                <span><i class="fa-solid fa-check"></i> Auto-Format Check</span>
                                                <span><i class="fa-solid fa-check"></i> Duplicate Removal</span>
                                            </div>
                                        </div>
                                        <div class="upload-action">
                                            <span class="fake-btn">Browse Files</span>
                                        </div>
                                    </div>

                                    <div class="sd-divider">
                                        <span>OR ADD INDIVIDUALLY</span>
                                    </div>

                                    <div class="sd-manual-bar">
                                        <div class="input-with-icon">
                                            <i class="fa-solid fa-user"></i>
                                            <input type="text" id="manual-name" placeholder="Full Name">
                                        </div>
                                        <div class="input-with-icon">
                                            <i class="fa-solid fa-phone"></i>
                                            <input type="text" id="manual-phone" placeholder="Phone Number">
                                        </div>
                                        <div class="input-with-icon">
                                            <i class="fa-solid fa-envelope"></i>
                                            <input type="text" id="manual-email" placeholder="Email Address">
                                        </div>
                                        <button class="btn-quick-add" onclick="addManualCandidate()">
                                            <i class="fa-solid fa-plus"></i> Add
                                        </button>
                                    </div>

                                    <div class="sd-list-container">
                                        <div class="sd-list-header">
                                            <h3>Target Candidates</h3>
                                            <span class="count-badge" id="candidate-count">0</span>
                                        </div>

                                        <div class="sd-table-wrapper">
                                            <table class="sd-table">
                                                <thead>
                                                    <tr>
                                                        <th style="width: 30%;">Name</th>
                                                        <th style="width: 25%;">Phone</th>
                                                        <th style="width: 35%;">Email</th>
                                                        <th style="width: 10%; text-align: right;">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="candidates-list-body">
                                                    <tr>
                                                        <td colspan="4" class="empty-state-row">
                                                            <i class="fa-solid fa-users-slash"></i>
                                                            <span>No candidates added yet. Upload a file or add
                                                                manually.</span>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="tab-structure" class="hr-tab-content">
                                <div class="vapi-section-head" style="margin-bottom: 20px;">
                                    <span style="font-size: 15px; font-weight: 600; color: white;">1. Select Interview
                                        Mode</span>
                                </div>
                                <div class="step-grid-3" id="mode-selection">
                                    <div class="step-card-compact theme-red"
                                        onclick="selec">
